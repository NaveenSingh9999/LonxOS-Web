<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LonxRender - Native Browser Engine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><text y='18' font-size='18'>üåê</text></svg>">
</head>
<body>
    <div id="browser-container" class="browser-container">
        <!-- Top Navigation Bar -->
        <div class="nav-bar">
            <div class="nav-controls">
                <button id="back-btn" class="nav-btn" title="Back" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                </button>
                <button id="forward-btn" class="nav-btn" title="Forward" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </button>
                <button id="reload-btn" class="nav-btn" title="Reload">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                </button>
                <button id="home-btn" class="nav-btn" title="Home">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9,22 9,12 15,12 15,22"/>
                    </svg>
                </button>
            </div>

            <div class="address-bar-container">
                <div class="security-indicator" id="security-indicator">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <circle cx="12" cy="16" r="1"/>
                        <path d="m7 11 0-5a5 5 0 0 1 10 0v5"/>
                    </svg>
                </div>
                <input type="text" id="address-bar" class="address-bar" placeholder="Search or enter URL..." spellcheck="false">
                <button id="go-btn" class="go-btn">Go</button>
            </div>

            <div class="browser-controls">
                <button id="bookmarks-btn" class="control-btn" title="Bookmarks">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/>
                    </svg>
                </button>
                <button id="history-btn" class="control-btn" title="History">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                    </svg>
                </button>
                <button id="console-btn" class="control-btn" title="Console">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4,17 10,11 4,5"/>
                        <line x1="12" y1="19" x2="20" y2="19"/>
                    </svg>
                </button>
                <button id="settings-btn" class="control-btn" title="Settings">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="m12 1 1.77 3.55 3.9.58-2.83 2.76.67 3.9L12 10.18l-3.51 1.61.67-3.9L6.33 5.13l3.9-.58L12 1z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Tab Bar -->
        <div class="tab-bar" id="tab-bar">
            <div class="tab active" data-tab-id="tab-1">
                <span class="tab-favicon">üåê</span>
                <span class="tab-title">New Tab</span>
                <button class="tab-close" title="Close tab">√ó</button>
            </div>
            <button class="new-tab-btn" id="new-tab-btn" title="New tab">+</button>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <!-- Loading Indicator -->
            <div class="loading-bar" id="loading-bar">
                <div class="loading-progress"></div>
            </div>

            <!-- Render Viewport -->
            <div class="render-viewport" id="render-viewport">
                <div class="tab-content active" data-tab-id="tab-1">
                    <div class="welcome-screen">
                        <div class="welcome-content">
                            <h1>üåê LonxRender</h1>
                            <p>Native Browser Engine for LonxOS</p>
                            <div class="quick-actions">
                                <div class="quick-link" onclick="LonxRender.navigate('https://github.com')">
                                    <div class="quick-icon">üìÅ</div>
                                    <span>GitHub</span>
                                </div>
                                <div class="quick-link" onclick="LonxRender.navigate('https://youtube.com')">
                                    <div class="quick-icon">üì∫</div>
                                    <span>YouTube</span>
                                </div>
                                <div class="quick-link" onclick="LonxRender.navigate('webgl-test.html')">
                                    <div class="quick-icon">üéÆ</div>
                                    <span>WebGL Test</span>
                                </div>
                                <div class="quick-link" onclick="LonxRender.openBookmarks()">
                                    <div class="quick-icon">‚≠ê</div>
                                    <span>Bookmarks</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Console Panel (Hidden by default) -->
            <div class="console-panel" id="console-panel">
                <div class="console-header">
                    <h3>Developer Console</h3>
                    <div class="console-controls">
                        <button id="clear-console" class="console-btn">Clear</button>
                        <button id="close-console" class="console-btn">√ó</button>
                    </div>
                </div>
                <div class="console-content" id="console-content">
                    <div class="console-message info">
                        <span class="console-timestamp">[00:00:00]</span>
                        <span class="console-text">LonxRender initialized successfully</span>
                    </div>
                </div>
                <div class="console-input-area">
                    <input type="text" id="console-input" placeholder="Enter JavaScript command..." spellcheck="false">
                    <button id="console-execute">Execute</button>
                </div>
            </div>
        </div>

        <!-- Sidebar Panels -->
        <div class="sidebar" id="sidebar">
            <!-- Bookmarks Panel -->
            <div class="sidebar-panel" id="bookmarks-panel">
                <div class="panel-header">
                    <h3>Bookmarks</h3>
                    <button class="panel-close">√ó</button>
                </div>
                <div class="panel-content" id="bookmarks-content">
                    <div class="bookmark-item" onclick="LonxRender.navigate('https://lonx.dev')">
                        <span class="bookmark-icon">üè†</span>
                        <span class="bookmark-title">LonxOS</span>
                    </div>
                </div>
                <div class="panel-footer">
                    <button id="add-bookmark" class="panel-btn">Add Current Page</button>
                </div>
            </div>

            <!-- History Panel -->
            <div class="sidebar-panel" id="history-panel">
                <div class="panel-header">
                    <h3>History</h3>
                    <button class="panel-close">√ó</button>
                </div>
                <div class="panel-content" id="history-content">
                    <!-- History items will be populated here -->
                </div>
                <div class="panel-footer">
                    <button id="clear-history" class="panel-btn">Clear History</button>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="sidebar-panel" id="settings-panel">
                <div class="panel-header">
                    <h3>Settings</h3>
                    <button class="panel-close">√ó</button>
                </div>
                <div class="panel-content" id="settings-content">
                    <div class="setting-group">
                        <label class="setting-label">
                            <input type="checkbox" id="setting-javascript" checked>
                            Enable JavaScript
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">
                            <input type="checkbox" id="setting-webgl" checked>
                            Enable WebGL
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">
                            <input type="checkbox" id="setting-console" checked>
                            Enable Console
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">Homepage:</label>
                        <input type="text" id="setting-homepage" value="https://lonx.dev" class="setting-input">
                    </div>
                </div>
                <div class="panel-footer">
                    <button id="save-settings" class="panel-btn">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar" id="status-bar">
        <span class="status-text" id="status-text">Ready</span>
        <span class="status-info" id="status-info"></span>
    </div>

    <!-- Load Scripts -->
    <script src="console.js"></script>
    <script src="render.js"></script>
    <script src="engine.js"></script>

    <script>
        // Initialize LonxRender when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof LonxRender !== 'undefined') {
                LonxRender.init();
                
                // Check for URL parameter
                const urlParams = new URLSearchParams(window.location.search);
                const targetUrl = urlParams.get('url');
                if (targetUrl) {
                    setTimeout(() => {
                        LonxRender.navigate(targetUrl);
                    }, 500);
                }
            } else {
                console.error('LonxRender not loaded');
            }
        });

        // Global access for LonxOS shell commands
        window.lonxBrowser = {
            navigate: (url) => LonxRender.navigate(url),
            newTab: () => LonxRender.createTab(),
            close: () => window.close()
        };
    </script>
</body>
</html>
